@using Microsoft.AspNetCore.Identity
@using ITAssetKeeper.Models.Entities
@using ITAssetKeeper.Models.Enums
@using ITAssetKeeper.Models.ViewModels.Shared
@model SidebarViewModel

@{
    bool isAdmin = Model.Role == Roles.Admin;
    bool isEditor = Model.Role == Roles.Editor;
    bool isViewer = Model.Role == Roles.Viewer;
}

<div class="sidebar">
    @* ロゴ表示 *@
    <div class="sidebar-logo-box">
        <div class="sidebar-logo-container">
            <img src="~/img/logo.png" class="logo-image" alt="logo" />
            <span class="sidebar-logo-title-text">IT Asset Keeper</span>
        </div>
    </div>

    <ul class="sidebar-menu">

        @*  DashBoard（Adminのみ）*@
        @if (isAdmin)
        {
            <li>
                <a asp-controller="Dashboard" asp-action="Admin"
                   class="@(ViewContext.RouteData.Values["controller"]?.ToString() == "Dashboard" ? "active" : "")">
                    <i class="bi bi-speedometer2"></i> ダッシュボード
                </a>
            </li>
        }

        @* 機器一覧 + 機器情報詳細(全ロール) *@
        <li>
            <a asp-controller="Device" asp-action="Index"
               class="@(ViewContext.RouteData.Values["controller"]?.ToString() == "Device"
                        && ViewContext.RouteData.Values["action"]?.ToString() != "Create"
                        ? "active" : "")">
                <i class="bi bi-laptop"></i> 機器情報
            </a>
        </li>

        @* 機器登録(Adminのみ) *@
        @if (isAdmin)
        {
            <li>
                <a asp-controller="Device" asp-action="Create"
                    class="@(ViewContext.RouteData.Values["controller"]?.ToString() == "Device"
                        && ViewContext.RouteData.Values["action"]?.ToString() == "Create"
                        ? "active" : "")">
                <i class="bi bi-speedometer2"></i> 機器情報 登録
                </a>
            </li>
        }

        @* 履歴(全ロール) *@
        <li>
            <a asp-controller="DeviceHistory" asp-action="Index"
               class="@(ViewContext.RouteData.Values["controller"]?.ToString() == "DeviceHistory" ? "active" : "")">
                <i class="bi bi-clock-history"></i> 更新履歴
            </a>
        </li>

        @* ユーザー一覧 (Admin/Editor) ※作成中*@
        @* @if (isAdmin || isEditor)
        {
            <li>
                <a asp-controller="Account" asp-action="UserList"
                   class="@(ViewContext.RouteData.Values["controller"]?.ToString() == "Account"
                                       && ViewContext.RouteData.Values["action"]?.ToString() == "UserList"
                                       ? "active" : "")">
                <i class="bi bi-shield-lock"></i> ユーザー 一覧
            </a>
        </li>
        } *@

        @* ユーザー登録 (Adminのみ) ※作成中 *@
        @* @if (isAdmin)
        {
            <li>
                <a asp-controller="Account" asp-action="Create"
                   class="@(ViewContext.RouteData.Values["controller"]?.ToString() == "Account"
                                                      && ViewContext.RouteData.Values["action"]?.ToString() == "Create"
                                   ? "active" : "")">
                <i class="bi bi-people"></i> ユーザー 登録
            </a>
        </li>
        } *@

    </ul>

    
    <ul class="sidebar-footer">
        @* アカウント *@
        <li>
            <a asp-controller="Account" asp-action="Profile" asp-route-username="@Model.UserName"
               class="sidebar-footer-link" id="profileLink">
                アカウント
            </a>
        </li>

        @* ログアウト *@
        <li>
            <a href="#" class="sidebar-footer-link" id="logoutLink">ログアウト</a>
        </li>
    </ul>

    @* サイドバーフッター *@
    <div class="sidebar-footer-logo">
        © 2025 - IT Asset Keeper
    </div>
</div>

